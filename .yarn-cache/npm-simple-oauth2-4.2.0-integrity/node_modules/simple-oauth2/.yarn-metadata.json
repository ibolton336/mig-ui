{
  "manifest": {
    "name": "simple-oauth2",
    "version": "4.2.0",
    "description": "Node.js client for OAuth2",
    "author": {
      "name": "Andrea Reginato",
      "email": "andrea.reginato@gmail.com"
    },
    "contributors": [
      {
        "name": "Jonathan Samines",
        "email": "jn.samines@gmail.com"
      }
    ],
    "license": "Apache-2.0",
    "homepage": "https://github.com/lelylan/simple-oauth2",
    "main": "index.js",
    "files": [
      "lib"
    ],
    "repository": {
      "type": "git",
      "url": "https://github.com/lelylan/simple-oauth2"
    },
    "engine": {
      "node": ">=12"
    },
    "scripts": {
      "pretest": "npm run lint",
      "test": "nyc ava",
      "lint": "eslint .",
      "docs-gen": "doctoc README.md --github --no-title",
      "clean-install": "rm -rf node_modules && npm install"
    },
    "nyc": {
      "check-coverage": true,
      "lines": 100,
      "statements": 100,
      "functions": 100,
      "branches": 100,
      "reporter": [
        "lcov",
        "text-summary"
      ]
    },
    "keywords": [
      "oauth2",
      "authorization",
      "password",
      "client",
      "credentials"
    ],
    "dependencies": {
      "@hapi/hoek": "^9.0.4",
      "@hapi/wreck": "^17.0.0",
      "debug": "^4.1.1",
      "joi": "^17.3.0"
    },
    "devDependencies": {
      "@hapi/boom": "^9.1.0",
      "ava": "^3.8.2",
      "babel-eslint": "^10.1.0",
      "chance": "^1.1.6",
      "chance-access-token": "^2.0.0",
      "date-fns": "^2.14.0",
      "doctoc": "^1.4.0",
      "eslint": "^7.2.0",
      "eslint-config-airbnb-base": "^14.2.0",
      "eslint-plugin-import": "^2.21.2",
      "nock": "^12.0.3",
      "nyc": "^15.1.0"
    },
    "volta": {
      "node": "14.15.1"
    },
    "_registry": "npm",
    "_loc": "/Users/ibolton/Library/Caches/Yarn/v6/npm-simple-oauth2-4.2.0-integrity/node_modules/simple-oauth2/package.json",
    "readmeFilename": "README.md",
    "readme": "# Simple OAuth2\n\n[![NPM Package Version](https://img.shields.io/npm/v/simple-oauth2.svg?style=flat-square)](https://www.npmjs.com/package/simple-oauth2)\n[![Build Status](https://github.com/lelylan/simple-oauth2/workflows/Node.js%20CI/badge.svg)](https://github.com/lelylan/simple-oauth2/actions)\n[![Dependency Status](https://img.shields.io/david/lelylan/simple-oauth2.svg?style=flat-square)](https://david-dm.org/lelylan/simple-oauth2)\n\n[Simple OAuth2](#simple-oauth2) is a Node.js client library for the [OAuth 2.0](http://oauth.net/2/) authorization framework. [OAuth 2.0](http://oauth.net/2/) is the industry-standard protocol for authorization, enabling third-party applications to obtain limited access to an HTTP service, either on behalf of a resource owner or by allowing the third-party application to obtain access on it's own behalf.\n\n## Table of Contents\n\n<!-- START doctoc generated TOC please keep comment here to allow auto update -->\n<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->\n\n\n- [Simple OAuth2](#simple-oauth2)\n  - [Table of Contents](#table-of-contents)\n  - [Requirements](#requirements)\n  - [Usage](#usage)\n    - [Supported Grant Types](#supported-grant-types)\n      - [Authorization Code Grant](#authorization-code-grant)\n      - [Resource Owner Password Credentials Grant](#resource-owner-password-credentials-grant)\n      - [Client Credentials Grant](#client-credentials-grant)\n    - [Access Token](#access-token)\n      - [Refresh an access token](#refresh-an-access-token)\n      - [Revoke an access or refresh token](#revoke-an-access-or-refresh-token)\n    - [Errors](#errors)\n  - [Debugging the module](#debugging-the-module)\n  - [Contributing](#contributing)\n  - [Authors](#authors)\n    - [Contributors](#contributors)\n  - [Changelog](#changelog)\n  - [License](#license)\n  - [Thanks to Open Source](#thanks-to-open-source)\n\n<!-- END doctoc generated TOC please keep comment here to allow auto update -->\n\n## Requirements\n\n| Version                                                                          | Node support        |\n|----------------------------------------------------------------------------------|---------------------|\n| [3.x](https://github.com/lelylan/simple-oauth2/tree/3.x)                         | Node 8.x or higher  |\n| [4.x (Current)](https://github.com/lelylan/simple-oauth2/tree/master)            | Node 12.x or higher |\n\nOlder node versions are unsupported.\n\n## Usage\n\nInstall the client library using [npm](http://npmjs.org/):\n\n```bash\nnpm install --save simple-oauth2\n```\n\nWith a minimal configuration, create an client instace of any supported [grant type](#supported-grant-types).\n\n```javascript\nconst config = {\n  client: {\n    id: '<client-id>',\n    secret: '<client-secret>'\n  },\n  auth: {\n    tokenHost: 'https://api.oauth.com'\n  }\n};\n\nconst { ClientCredentials, ResourceOwnerPassword, AuthorizationCode } = require('simple-oauth2');\n```\n\nFor a complete reference of configuration options, see the [API Options](./API.md#options)\n\n### Supported Grant Types\n\nDepending on your use-case, any of the following supported grant types may be useful:\n\n#### Authorization Code Grant\n\nThe [Authorization Code](https://oauth.net/2/grant-types/authorization-code/) grant type is used by confidential and public clients to exchange an authorization code for an access token. After the user returns to the client via the redirect URL, the application will get the authorization code from the URL and use it to request an access token.\n\n```javascript\nasync function run() {\n  const client = new AuthorizationCode(config);\n\n  const authorizationUri = client.authorizeURL({\n    redirect_uri: 'http://localhost:3000/callback',\n    scope: '<scope>',\n    state: '<state>'\n  });\n\n  // Redirect example using Express (see http://expressjs.com/api.html#res.redirect)\n  res.redirect(authorizationUri);\n\n  const tokenParams = {\n    code: '<code>',\n    redirect_uri: 'http://localhost:3000/callback',\n    scope: '<scope>',\n  };\n\n  try {\n    const accessToken = await client.getToken(tokenParams);\n  } catch (error) {\n    console.log('Access Token Error', error.message);\n  }\n}\n\nrun();\n```\n\nSee the [API reference](./API.md#new-authorizationcodeoptions) for a complete reference of available options or any of our available examples at the [example folder](./example).\n\n#### Resource Owner Password Credentials Grant\n\nThe [Resource Owner Password Credentials](https://oauth.net/2/grant-types/password/) grant type is a way to exchange a user's credentials for an access token. Because the client application has to collect the user's password and send it to the authorization server, it is not recommended that this grant be used at all anymore.\n\n```javascript\nasync function run() {\n  const client = new ResourceOwnerPassword(config);\n\n  const tokenParams = {\n    username: 'username',\n    password: 'password',\n    scope: '<scope>',\n  };\n\n  try {\n    const accessToken = await client.getToken(tokenParams);\n  } catch (error) {\n    console.log('Access Token Error', error.message);\n  }\n}\n\nrun();\n```\n\nSee the [API reference](./API.md#new-resourceownerpasswordoptions) for a complete reference of available options.\n\n#### Client Credentials Grant\n\nThe [Client Credentials](https://oauth.net/2/grant-types/client-credentials/) grant type is used by clients to obtain an access token outside of the context of a user. This is typically used by clients to access resources about themselves rather than to access a user's resources.\n\n```javascript\nasync function run() {\n  const client = new ClientCredentials(config);\n\n  const tokenParams = {\n    scope: '<scope>',\n  };\n\n  try {\n    const accessToken = await client.getToken(tokenParams);\n  } catch (error) {\n    console.log('Access Token error', error.message);\n  }\n}\n\nrun();\n```\n\nSee the [API reference](./API.md#new-clientcredentialsoptions) for a complete reference of available options.\n\n### Access Token\n\nOn completion of any [supported grant type](#supported-grant-types) an access token will be obtained. A list of supported operations can be found below.\n\n#### Refresh an access token\n\nOn long lived applications, it is often necessary to refresh access tokens. In such scenarios the access token is usually persisted in an external database by first serializing it.\n\n\n```javascript\nasync function run() {\n  const accessTokenJSONString = JSON.stringify(accessToken);\n\n  await persistAccessTokenJSON(accessTokenJSONString);\n}\n\nrun();\n```\n\nBy the time we need to refresh the persistent access token, we can get back an [AccessToken](./API.md#accesstoken) instance by using the client's [.createToken](./API.md#createtokentoken--accesstoken) method.\n\n```javascript\nasync function run() {\n  const accessTokenJSONString = await getPersistedAccessTokenJSON();\n\n  let accessToken = client.createToken(JSON.parse(accessTokenJSONString));\n}\n\nrun();\n```\n\nOnce we have determined the access token needs refreshing with the [.expired()](./API.md#expiredexpirationwindowseconds--boolean) method, we can finally refresh it with a [.refresh()](./API.md#await-refreshparams--accesstoken) method call.\n\n```javascript\nasync function run() {\n  if (accessToken.expired()) {\n    try {\n      const refreshParams = {\n        scope: '<scope>',\n      };\n\n      accessToken = await accessToken.refresh(refreshParams);\n    } catch (error) {\n      console.log('Error refreshing access token: ', error.message);\n    }\n  }\n}\n\nrun();\n```\n\nThe [.expired()](./API.md##expiredexpirationwindowseconds--boolean) helper is useful for knowing when a token has definitively expired. However, there is a common race condition when tokens are near expiring. If an OAuth 2.0 token is issued with a `expires_in` property (as opposed to an `expires_at` property), there can be discrepancies between the time the OAuth 2.0 server issues the access token and when it is received.\n\nThese come down to factors such as network and processing latency and can be worked around by preemptively refreshing the access token:\n\n```javascript\nasync function run() {\n  const EXPIRATION_WINDOW_IN_SECONDS = 300; // Window of time before the actual expiration to refresh the token\n\n  if (accessToken.expired(EXPIRATION_WINDOW_IN_SECONDS)) {\n    try {\n      accessToken = await accessToken.refresh();\n    } catch (error) {\n      console.log('Error refreshing access token: ', error.message);\n    }\n  }\n}\n\nrun();\n```\n\n**Warning:** Tokens obtained with the Client Credentials grant may not be refreshed. Fetch a new token when it's expired.\n\nSee the [API reference](./API.md#accesstoken) for a complete reference of available options.\n\n#### Revoke an access or refresh token\n\nWhen you've done with the token or you want to log out, you can revoke both access and refresh tokens.\n\n```javascript\nasync function run() {\n  try {\n    await accessToken.revoke('access_token');\n    await accessToken.revoke('refresh_token');\n  } catch (error) {\n    console.log('Error revoking token: ', error.message);\n  }\n}\n\nrun();\n```\n\nAs a convenience method, you can also revoke both tokens in a single call:\n\n```javascript\nasync function run() {\n  try {\n    // Revokes both tokens, refresh token is only revoked if the access_token is properly revoked\n    await accessToken.revokeAll();\n  } catch (error) {\n    console.log('Error revoking token: ', error.message);\n  }\n}\n\nrun();\n```\n\nSee the [API reference](./API.md#accesstoken) for a complete reference of available options.\n\n### Errors\n\nWhenever a client or server error is produced, a [boom](https://github.com/hapijs/boom) error is thrown by the library. As such any [boom error property](https://hapi.dev/module/boom/api) is available, but the exact information may vary according to the type of error.\n\n```javascript\nasync function run() {\n  const client = new ClientCredentials(config);\n\n  try {\n    await client.getToken();\n  } catch(error) {\n    console.log(error.output);\n  }\n}\n\nrun();\n\n// { statusCode: 401,\n//   payload:\n//    { statusCode: 401,\n//      error: 'Unauthorized',\n//      message: 'Response Error: 401 Unauthorized' },\n//   headers: {} }\n```\n\n## Debugging the module\nThis module uses the [debug](https://github.com/visionmedia/debug) module to help on error diagnosis. Use the following environment variable to help in your debug journey:\n\n```\nDEBUG=*simple-oauth2*\n```\n\n## Contributing\n\nSee [CONTRIBUTING](./CONTRIBUTING.md)\n\n## Authors\n\n[Andrea Reginato](http://twitter.com/lelylan)\n\n### Contributors\n\nSpecial thanks to the following people for submitting patches.\n\n* [Jonathan Samines](https://github.com/jonathansamines)\n\n## Changelog\n\nSee [CHANGELOG](./CHANGELOG.md)\n\n## License\n\nSimple OAuth 2.0 is licensed under the [Apache License, Version 2.0](http://www.apache.org/licenses/LICENSE-2.0)\n\n## Thanks to Open Source\n\nSimple OAuth 2.0 come to life thanks to the work I've made in Lelylan, an open source microservices architecture for the Internet of Things. If this project helped you in any way, think about giving us a <a href=\"https://github.com/lelylan/lelylan\">star on Github</a>.\n\n<a href=\"https://github.com/lelylan/lelylan\">\n<img src=\"https://raw.githubusercontent.com/lelylan/lelylan/master/public/logo-lelylan.png\" data-canonical-src=\"https://raw.githubusercontent.com/lelylan/lelylan/master/public/logo-lelylan.png\" width=\"300\"/></a>\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.npmjs.org/simple-oauth2/-/simple-oauth2-4.2.0.tgz",
    "type": "tarball",
    "reference": "https://registry.npmjs.org/simple-oauth2/-/simple-oauth2-4.2.0.tgz",
    "hash": "",
    "integrity": "sha512-AV62tGdq9JfLd/uveKpeNtQl+VVm89a35QKlwGuvisYIjCoz2ZmTGRGuSIGiYr+QUhSKJ5kYN1jq2BBa/ac/GQ==",
    "registry": "npm",
    "packageName": "simple-oauth2",
    "cacheIntegrity": "sha512-AV62tGdq9JfLd/uveKpeNtQl+VVm89a35QKlwGuvisYIjCoz2ZmTGRGuSIGiYr+QUhSKJ5kYN1jq2BBa/ac/GQ== sha1-j3AV8szQ6m6U012L06v6N5v7poE="
  },
  "registry": "npm",
  "hash": "015eb6b4676af497cb77fbaf78aa5e36d425f95566f3d6b7e502a5c06baf8ac6088c2a33d999931911ae4881a262bf9052148a2799183758ead8105afda73f19"
}